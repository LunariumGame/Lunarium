[gd_scene load_steps=79 format=3 uid="uid://sr08scun8ys1"]

[ext_resource type="Script" uid="uid://6myfee53w1xy" path="res://scripts/buildings/building.gd" id="1_a3sb6"]
[ext_resource type="Script" uid="uid://dh3go6ocensfh" path="res://scripts/buildings/building_collider.gd" id="3_qcxio"]
[ext_resource type="Script" uid="uid://dxx0x0ph2itdh" path="res://scripts/buildings/building_debugger.gd" id="4_daisx"]
[ext_resource type="Script" uid="uid://dde4jsmfv432l" path="res://scripts/buildings/building_sprite.gd" id="4_mfina"]
[ext_resource type="Script" uid="uid://bkbe1ecuocexf" path="res://scripts/buildings/disable_player.gd" id="5_f6oyp"]
[ext_resource type="Script" uid="uid://cr5mxmcexbr8u" path="res://scripts/buildings/building_animation_manager.gd" id="5_mfina"]
[ext_resource type="AudioStream" uid="uid://doeawp7mo3bx3" path="res://assets/audio/create_building.wav" id="7_vnr05"]
[ext_resource type="Script" uid="uid://8bfbsy6x2mbf" path="res://scripts/buildings/manage_audio.gd" id="7_wlaec"]
[ext_resource type="AudioStream" uid="uid://ddewr8w7tjhey" path="res://assets/audio/building_destroyed.wav" id="8_vnr05"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_27e8i"]
size = Vector2(32, 32)

[sub_resource type="PlaceholderTexture2D" id="PlaceholderTexture2D_mfina"]

[sub_resource type="Animation" id="Animation_daisx"]
resource_name = "buffed_u1"
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(),
"transitions": PackedFloat32Array(),
"update": 1,
"values": []
}

[sub_resource type="Animation" id="Animation_mfina"]
resource_name = "buffed_u2"
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(),
"transitions": PackedFloat32Array(),
"update": 1,
"values": []
}

[sub_resource type="Animation" id="Animation_f6oyp"]
resource_name = "buffed_u3"
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(),
"transitions": PackedFloat32Array(),
"update": 1,
"values": []
}

[sub_resource type="Animation" id="Animation_oalqm"]
resource_name = "create_u1"
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:region_rect")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(),
"transitions": PackedFloat32Array(),
"update": 0,
"values": []
}

[sub_resource type="Animation" id="Animation_vnr05"]
resource_name = "create_u2"
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(),
"transitions": PackedFloat32Array(),
"update": 1,
"values": []
}

[sub_resource type="Animation" id="Animation_wlaec"]
resource_name = "create_u3"
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(),
"transitions": PackedFloat32Array(),
"update": 1,
"values": []
}

[sub_resource type="Animation" id="Animation_hhebf"]
resource_name = "delete_u1"
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(),
"transitions": PackedFloat32Array(),
"update": 1,
"values": []
}

[sub_resource type="Animation" id="Animation_1x723"]
resource_name = "delete_u2"
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(),
"transitions": PackedFloat32Array(),
"update": 1,
"values": []
}

[sub_resource type="Animation" id="Animation_0krn8"]
resource_name = "delete_u3"
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(),
"transitions": PackedFloat32Array(),
"update": 1,
"values": []
}

[sub_resource type="Animation" id="Animation_ofkw7"]
resource_name = "idle_u1"
length = 1.5
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(),
"transitions": PackedFloat32Array(),
"update": 1,
"values": []
}

[sub_resource type="Animation" id="Animation_volt3"]
resource_name = "idle_u2"
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(),
"transitions": PackedFloat32Array(),
"update": 1,
"values": []
}

[sub_resource type="Animation" id="Animation_xl0vr"]
resource_name = "idle_u3"
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(),
"transitions": PackedFloat32Array(),
"update": 1,
"values": []
}

[sub_resource type="Animation" id="Animation_u6fk5"]
resource_name = "off_u1"
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(),
"transitions": PackedFloat32Array(),
"update": 1,
"values": []
}

[sub_resource type="Animation" id="Animation_w2b1x"]
resource_name = "off_u2"
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(),
"transitions": PackedFloat32Array(),
"update": 1,
"values": []
}

[sub_resource type="Animation" id="Animation_4hstu"]
resource_name = "off_u3"
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(),
"transitions": PackedFloat32Array(),
"update": 1,
"values": []
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_daisx"]
_data = {
&"buffed_u1": SubResource("Animation_daisx"),
&"buffed_u2": SubResource("Animation_mfina"),
&"buffed_u3": SubResource("Animation_f6oyp"),
&"create_u1": SubResource("Animation_oalqm"),
&"create_u2": SubResource("Animation_vnr05"),
&"create_u3": SubResource("Animation_wlaec"),
&"delete_u1": SubResource("Animation_hhebf"),
&"delete_u2": SubResource("Animation_1x723"),
&"delete_u3": SubResource("Animation_0krn8"),
&"idle_u1": SubResource("Animation_ofkw7"),
&"idle_u2": SubResource("Animation_volt3"),
&"idle_u3": SubResource("Animation_xl0vr"),
&"off_u1": SubResource("Animation_u6fk5"),
&"off_u2": SubResource("Animation_w2b1x"),
&"off_u3": SubResource("Animation_4hstu")
}

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_daisx"]
animation = &"buffed_u1"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_mfina"]
animation = &"buffed_u2"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_f6oyp"]
animation = &"buffed_u3"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_hhebf"]
animation = &"create_u1"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_1x723"]
animation = &"create_u2"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_0krn8"]
animation = &"create_u3"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_ofkw7"]
animation = &"delete_u1"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_volt3"]
animation = &"delete_u2"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_xl0vr"]
animation = &"delete_u3"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_oalqm"]
animation = &"idle_u1"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_vnr05"]
animation = &"idle_u2"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_wlaec"]
animation = &"idle_u3"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_u6fk5"]
animation = &"off_u1"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_w2b1x"]
animation = &"off_u2"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_4hstu"]
animation = &"off_u3"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_daisx"]
switch_mode = 1

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_mfina"]
switch_mode = 1

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_j2vja"]
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_c57nt"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_ia6p8"]
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_05lpc"]
switch_mode = 1

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_qmjy6"]
switch_mode = 1

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_diqjy"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_cjfqh"]
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_b7rl2"]
switch_mode = 1

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_5ygep"]
switch_mode = 1

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_11vwp"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_7s87l"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_kus1u"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_ns6s8"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_r8gg6"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_5a7io"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_hssoc"]
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_3iqlq"]
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_67fr5"]
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_2bcsn"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_g43g5"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_jh2q7"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_d0qax"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_ygdnu"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_8fr13"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_f6oyp"]
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_oalqm"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_vnr05"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_wlaec"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_hhebf"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_1x723"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_0krn8"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_ofkw7"]

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_daisx"]
states/End/position = Vector2(793, 211)
states/Start/position = Vector2(266, -10)
states/buffed_u1/node = SubResource("AnimationNodeAnimation_daisx")
states/buffed_u1/position = Vector2(619, 109)
states/buffed_u2/node = SubResource("AnimationNodeAnimation_mfina")
states/buffed_u2/position = Vector2(619, 467)
states/buffed_u3/node = SubResource("AnimationNodeAnimation_f6oyp")
states/buffed_u3/position = Vector2(619, 697)
states/create_u1/node = SubResource("AnimationNodeAnimation_hhebf")
states/create_u1/position = Vector2(266, 109)
states/create_u2/node = SubResource("AnimationNodeAnimation_1x723")
states/create_u2/position = Vector2(443, 211)
states/create_u3/node = SubResource("AnimationNodeAnimation_0krn8")
states/create_u3/position = Vector2(443, 411)
states/delete_u1/node = SubResource("AnimationNodeAnimation_ofkw7")
states/delete_u1/position = Vector2(619, -10)
states/delete_u2/node = SubResource("AnimationNodeAnimation_volt3")
states/delete_u2/position = Vector2(619, 295)
states/delete_u3/node = SubResource("AnimationNodeAnimation_xl0vr")
states/delete_u3/position = Vector2(793, 554)
states/idle_u1/node = SubResource("AnimationNodeAnimation_oalqm")
states/idle_u1/position = Vector2(443, 109)
states/idle_u2/node = SubResource("AnimationNodeAnimation_vnr05")
states/idle_u2/position = Vector2(443, 307)
states/idle_u3/node = SubResource("AnimationNodeAnimation_wlaec")
states/idle_u3/position = Vector2(442, 559)
states/off_u1/node = SubResource("AnimationNodeAnimation_u6fk5")
states/off_u1/position = Vector2(443, -10)
states/off_u2/node = SubResource("AnimationNodeAnimation_w2b1x")
states/off_u2/position = Vector2(258, 449)
states/off_u3/node = SubResource("AnimationNodeAnimation_4hstu")
states/off_u3/position = Vector2(266, 697)
transitions = ["idle_u1", "buffed_u1", SubResource("AnimationNodeStateMachineTransition_daisx"), "buffed_u1", "idle_u1", SubResource("AnimationNodeStateMachineTransition_mfina"), "create_u1", "idle_u1", SubResource("AnimationNodeStateMachineTransition_j2vja"), "idle_u1", "create_u2", SubResource("AnimationNodeStateMachineTransition_c57nt"), "create_u2", "idle_u2", SubResource("AnimationNodeStateMachineTransition_ia6p8"), "idle_u2", "buffed_u2", SubResource("AnimationNodeStateMachineTransition_05lpc"), "buffed_u2", "idle_u2", SubResource("AnimationNodeStateMachineTransition_qmjy6"), "idle_u2", "create_u3", SubResource("AnimationNodeStateMachineTransition_diqjy"), "create_u3", "idle_u3", SubResource("AnimationNodeStateMachineTransition_cjfqh"), "idle_u3", "buffed_u3", SubResource("AnimationNodeStateMachineTransition_b7rl2"), "buffed_u3", "idle_u3", SubResource("AnimationNodeStateMachineTransition_5ygep"), "buffed_u3", "delete_u3", SubResource("AnimationNodeStateMachineTransition_11vwp"), "idle_u3", "delete_u3", SubResource("AnimationNodeStateMachineTransition_7s87l"), "buffed_u2", "delete_u2", SubResource("AnimationNodeStateMachineTransition_kus1u"), "idle_u2", "delete_u2", SubResource("AnimationNodeStateMachineTransition_ns6s8"), "buffed_u1", "delete_u1", SubResource("AnimationNodeStateMachineTransition_r8gg6"), "idle_u1", "delete_u1", SubResource("AnimationNodeStateMachineTransition_5a7io"), "delete_u1", "End", SubResource("AnimationNodeStateMachineTransition_hssoc"), "delete_u2", "End", SubResource("AnimationNodeStateMachineTransition_3iqlq"), "delete_u3", "End", SubResource("AnimationNodeStateMachineTransition_67fr5"), "off_u2", "idle_u2", SubResource("AnimationNodeStateMachineTransition_2bcsn"), "idle_u2", "off_u2", SubResource("AnimationNodeStateMachineTransition_g43g5"), "off_u3", "idle_u3", SubResource("AnimationNodeStateMachineTransition_jh2q7"), "idle_u3", "off_u3", SubResource("AnimationNodeStateMachineTransition_d0qax"), "idle_u1", "off_u1", SubResource("AnimationNodeStateMachineTransition_ygdnu"), "off_u1", "idle_u1", SubResource("AnimationNodeStateMachineTransition_8fr13"), "Start", "off_u1", SubResource("AnimationNodeStateMachineTransition_f6oyp"), "off_u1", "create_u1", SubResource("AnimationNodeStateMachineTransition_oalqm"), "buffed_u3", "off_u3", SubResource("AnimationNodeStateMachineTransition_vnr05"), "buffed_u1", "off_u1", SubResource("AnimationNodeStateMachineTransition_wlaec"), "buffed_u2", "off_u2", SubResource("AnimationNodeStateMachineTransition_hhebf"), "off_u1", "delete_u1", SubResource("AnimationNodeStateMachineTransition_1x723"), "off_u2", "delete_u2", SubResource("AnimationNodeStateMachineTransition_0krn8"), "off_u3", "delete_u3", SubResource("AnimationNodeStateMachineTransition_ofkw7")]

[sub_resource type="AudioStream" id="AudioStream_vnr05"]

[node name="Building" type="Node2D"]
script = ExtResource("1_a3sb6")

[node name="Area2D" type="Area2D" parent="."]
script = ExtResource("3_qcxio")

[node name="CollisionShape2D" type="CollisionShape2D" parent="Area2D"]
shape = SubResource("RectangleShape2D_27e8i")

[node name="BuildingDebugger" type="Label" parent="."]
offset_left = -19.0
offset_top = -28.0
offset_right = 21.0
offset_bottom = -5.0
theme_override_font_sizes/font_size = 6
script = ExtResource("4_daisx")

[node name="Sprite2D" type="Sprite2D" parent="."]
texture = SubResource("PlaceholderTexture2D_mfina")
hframes = 5
vframes = 18
script = ExtResource("4_mfina")

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
active = false
libraries = {
&"": SubResource("AnimationLibrary_daisx")
}
script = ExtResource("5_f6oyp")

[node name="AnimationTree" type="AnimationTree" parent="."]
active = false
tree_root = SubResource("AnimationNodeStateMachine_daisx")
anim_player = NodePath("../AnimationPlayer")
script = ExtResource("5_mfina")

[node name="Audio" type="Node" parent="."]
script = ExtResource("7_wlaec")

[node name="Create" type="AudioStreamPlayer2D" parent="Audio"]
stream = ExtResource("7_vnr05")
bus = &"Effects"

[node name="Select" type="AudioStreamPlayer2D" parent="Audio"]
stream = SubResource("AudioStream_vnr05")

[node name="Destroy" type="AudioStreamPlayer2D" parent="Audio"]
stream = ExtResource("8_vnr05")
